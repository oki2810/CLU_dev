# CCU - ココフォリアログアップローダー

このツールは、ココフォリアのログ（log.html）を読みやすく整えて、あなたの GitHub のプロジェクトに追加するためのものです。

使い方
GitHub を準備する
GitHub のアカウントがない場合は GitHub に登録します。
画面右上の「＋」から「新しいリポジトリ」を作り、名前を決めます。

GitHub OAuth アプリを登録する
連携を自分の環境で使う場合は、GitHub の OAuth App に
`https://<あなたのドメイン>/api/auth/github-callback`
を Callback URL として登録し、同じ URL を `.env` の
`AUTH_CALLBACK_URL` に設定してください。

サイトを開く
ブラウザで https://ccfolia-log-uploader.vercel.app/ を開きます。

GitHub と連携する
画面にある「GitHub と連携」ボタンを押します。
表示される案内にしたがって許可すると、あなたのユーザー名が自動で取得され、リポジトリ名を入力する欄が表示されます。

ファイルを選ぶ
「整形したい HTML をアップロード」と書かれたところで、手元の log.html を選びます。
その下にある「シナリオ名」と「リンク名」を入力します。

ファイルを整える
「修正」ボタンを押すと、検索サイトに表示されないよう meta タグが自動で追加されます。

GitHub に追加する
「GitHub にコミット」ボタンを押すと、ファイルがあなたのプロジェクトに追加されます。
成功すると画面にメッセージが表示されます。また、入力したシナリオ名がログ一覧ページに表示されます。

アップロードしたページを見る
「ログ一覧ページを開く」ボタンから、アップしたログの一覧を確認できます。

## テンプレート方式への変更について

リポジトリ作成時は、テンプレートリポジトリ `CCU_template` を丸ごと複製する方式に変更しました。
そのため初回コミットは不要で、テンプレートに含まれるファイルがそのまま作成されたリポジトリに配置されます。

### 必要な環境変数

- `TEMPLATE_OWNER` – テンプレートを保持するユーザー名または org 名
- `TEMPLATE_REPO` – 使われるテンプレートリポジトリ名（通常は `CCU_template`）

これらは Vercel などのホスティング先にも設定してください。

備考
アップされたページには norobot.js という仕組みが働き、検索結果に出ないようにしています。もしページが表示されない場合は、GitHub の設定で「GitHub Pages」を有効にしてください。
